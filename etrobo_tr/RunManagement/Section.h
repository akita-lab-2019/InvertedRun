/**
 *******************************************************************************
 ** 区間パラメータリストを提供する
 *******************************************************************************
 **/
#ifndef EV3_SECTION_H_
#define EV3_SECTION_H_

// 適用するパラメータを選択する
// #define ODOM_LEFT
#define LOW
// #define DIFF

class Section
{
public:
    Section();
    void update(int num);
    int getSectionSumnum();
    int getSectionNum();
    int getRunMethod();
    float getForward();
    float getCurvature();
    void getPidParm(float pid_parm[3]);
    float getColorTarget();
    float getStartDistance();
    float getEndDistance();

private:
    int m_section_num = 0;     // 区間番号
    int m_run_method;          // 走法
    float m_distance;          // 区間長さ[m]
    float m_forward;           // 前進指令速度[%]
    float m_curvature;         // 曲率旋回量
    float m_pid_parm[3];       // PIDパラメータ
    float m_color_target = 22; // カラーセンサの目標値

#ifdef ODOM_LEFT
    //////////////////////////ODOMパラメータ////////////////////////////
    // 区間総数
    int m_section_sumnum = 14;

    // 走法リスト
    // 0: 通常ライントレース
    // 1: 角度追従
    int m_run_method_list[15] = {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};

    // 前進量リスト
    float m_forward_list[15] = {115, 115, 110, /*ライントレースしない*/ 95, 85, 95, 98, 103, 108, 115, 106, 95, 90, 90, 110};

    // 曲率旋回量リスト
    float m_curvature_list[15] = {0, 10.7, 0, /*ライントレースしない*/ 5, -5, -11, 0, -10, 0, -13.5, 0, -5.0, 19.0, 0, 0};

    // 区間終了距離リスト（それぞれの区間がスタートから何mの地点で終わるのかをリストアップしている）
    float m_distance_list[15] = {0.60, 1.25, 1.40, 2.45, 2.90, 3.50, 3.60, 4.44, 5.35, 5.90, 6.10, 6.45, 7.85, 8.15};

    // PID係数リスト
    float m_trace_pid_list[15][3] = {{0.300, 0.000, 0.029},
                                     {0.460, 0.000, 0.050},
                                     {0.300, 0.000, 0.038},
                                     {1.000, 0.000, 0.050},
                                     {0.550, 0.100, 0.074},
                                     {0.485, 0.000, 0.063},
                                     {0.300, 0.000, 0.035},
                                     {0.470, 0.000, 0.069},
                                     {0.300, 0.000, 0.029},
                                     {0.470, 0.000, 0.070},
                                     {0.300, 0.000, 0.060},
                                     {0.485, 0.000, 0.065},
                                     {0.553, 0.100, 0.060},
                                     {0.300, 0.000, 0.038},
                                     {0.587, 0.100, 0.078}};

public:
    char parm_name[16] = "Shortcut(L)";

    // 角度追従走行の目標角度リスト
    float target_angle_list[200] = {90.00, 90.00, 91.80, 93.60, 95.40, 97.20, 99.00, 100.80, 102.60, 104.40, 106.20, 108.00, 109.80, 111.60, 113.40, 115.20, 117.00, 118.80, 120.60, 122.40, 124.20, 126.00, 127.80, 129.60, 131.40, 133.20, 135.00, 136.80, 138.60, 140.40, 142.20, 144.00, 145.80, 147.60, 149.40, 151.20, 153.00, 154.80, 156.60, 158.40, 160.20, 162.00, 163.80, 165.60, 167.40, 169.20, 171.00, 172.80, 174.60, 176.40, 178.20, 180.00, 180.00, 180.00, 180.00, 180.00, 180.00, 180.00, 180.00, 182.00, 184.00, 186.00, 188.00, 190.00, 192.00, 194.00, 196.00, 198.00, 200.00, 202.00, 204.00, 206.00, 208.00, 210.00, 212.00, 214.00, 216.00, 218.00, 220.00, 222.00, 224.00, 226.00, 228.00, 230.00, 232.00, 234.00, 236.00, 238.00, 240.00, 242.00, 244.00, 246.00, 248.00, 250.00, 252.00, 254.00, 256.00, 258.00, 260.00, 262.00, 264.00, 266.00, 268.00, 270.00};
    ///////////////////////////////////////////////////////////////////
#endif

#ifdef LOW
    //////////////////////////ODOMパラメータ////////////////////////////
    // 区間総数
    int m_section_sumnum = 15;

    // 走法リスト
    // 0: 通常ライントレース
    // 1: 角度追従
    int m_run_method_list[15] = {0};

    // 前進量リスト
    float m_forward_list[15] = {118, 110, 115, 103, 95, 95, 98, 103, 108, 115, 106, 95, 88, 85, 110};

    // 曲率旋回量リスト
    float m_curvature_list[15] = {0, 11, 0, 10, 15.4, -15.3, -11.4, 0, -10.3, 0, -10.3, 0, 0.0, 19.0, 0};

    // 区間終了距離リスト（それぞれの区間がスタートから何mの地点で終わるのかをリストアップしている）
    float m_distance_list[15] = {0.60, 1.25, 1.70, 2.45, 3.32, 4.00, 4.60, 4.70, 5.53, 6.45, 7.00, 7.23, 7.55, 8.95, 9.25};

    // PID係数リスト
    float m_trace_pid_list[15][3] = {{0.300, 0.000, 0.029},  // 0
                                     {0.460, 0.000, 0.050},  // 1
                                     {0.300, 0.000, 0.038},  // 2
                                     {0.460, 0.000, 0.050},  // 3"
                                     {0.587, 0.100, 0.078},  // 4"
                                     {0.550, 0.100, 0.074},  // 5"
                                     {0.485, 0.000, 0.063},  // 6
                                     {0.300, 0.000, 0.035},  // 7
                                     {0.470, 0.000, 0.069},  // 8"
                                     {0.300, 0.000, 0.029},  // 9
                                     {0.470, 0.000, 0.070},  // 10"
                                     {0.300, 0.000, 0.060},  // 11
                                     {0.485, 0.000, 0.065},  // 12
                                     {0.610, 0.100, 0.060},  // 13"
                                     {0.300, 0.000, 0.038}}; // 14

public:
    char parm_name[16] = "LineTrace(R)";

    // 角度追従走行の目標角度リスト
    float target_angle_list[200] = {0};
    ///////////////////////////////////////////////////////////////////
#endif
};

#endif